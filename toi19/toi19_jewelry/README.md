<!-- @codegen_problem begin -->
# TOI19 jewelry - ‡∏™‡∏£‡πâ‡∏≠‡∏¢‡∏≠‡∏±‡∏ç‡∏°‡∏ì‡∏µ (Jewelry Necklace)

[üè† ‡∏£‡∏ß‡∏°‡πÄ‡∏â‡∏•‡∏¢ TOI19](../)

[üíé problem.pdf](./toi19_jewelry.pdf)

[üéâ solution.cpp](./toi19_jewelry.cpp)

<img width="700" src="https://github.com/krist7599555/toi/assets/19445033/95ccb6f3-3f7f-47d0-b003-390ce1b5a8d0" />
<!-- @codegen_problem end -->

**ü§¢ Math!!!**

‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏∏‡∏Ñ‡∏∑‡∏≠ ‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á `str[l..r]` ‡∏°‡∏µ `'T'` ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß

‡∏à‡∏≤‡∏Å ovservation ‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠ ‡∏¢‡∏¥‡πà‡∏á string ‡∏¢‡∏≤‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô T ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Å‡πá‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô

- `max_T(str[l..r]) <= max_T(str[l..r+1])`
- `max_T(str[l..r]) <= max_T(str[l-1..r])`

‡∏ã‡∏∂‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏≤ `max_T` ‡∏Å‡πá‡∏™‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö `Maximum Subarray (Kadane's Algorithm)` ‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏ô `O(n)`

> Kadane `max_subarray(arr[0..i]) = arr[i] + max(0, max_subarray(arr[0..i-1]))`

‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô T ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Ç‡∏±‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö‡∏ó‡∏≥‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ó‡∏ô

- `max_T(str[0..r]) <= max_T(str[0..r+1])`
- `max_T(str[0..r])  = max_T(str[0..r+1]) + K?`

‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤ K ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£

‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏£‡∏Å

```haskell
0
0
0
   F T T F T (sum = 0)

0
0
0  _
   F T T F T (sum = 0)
  [F] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 0

0
0
3  # #
   F T T F T (sum = 0 + 2 = 2)
    [T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
  [F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1

   * ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏∏‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 3 ‡πÄ‡∏•‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô 3 ‡πÅ‡∏ô‡πà‡πÜ
   ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° T ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ ‡∏à‡∏£‡∏¥‡∏á‡πÜ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏ô‡πà

0
2  # #
3  # # #
   F T T F T (sum = 2 + 3 = 5)
      [T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
    [F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2
  [F T T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2

   * ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å T ‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏ô‡∏±‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡πà‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏î‡πÑ‡∏ß‡πâ‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢

0
2  # #
3  # # # _
   F T T F T (sum = 5)
   ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏à‡∏∏‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏Ñ‡∏∑‡∏≠
      [T F] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
    [T T F] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2
  [F T T F] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2

0
2  # #
5  # # # # #
   F T T F T (sum = 5 + 2 = 7)
          [T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
        [F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
      [T F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 1
    [T T F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2
  [F T T F T] ‡∏°‡∏µ T ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 2

ans = 0 + 2 + 5 + 5 + 7 = 19
```

‡∏ñ‡πâ‡∏≤‡∏•‡∏≠‡∏á‡∏ó‡∏î‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ ‡∏Å‡πá‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡∏î‡πÑ‡∏°‡πà‡∏¢‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß

‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏ó‡∏≥‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ

![image](https://github.com/krist7599555/toi/assets/19445033/fc962591-e26c-49c8-94c0-c87416ed6db7)

‡πÅ‡∏ï‡πà‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ô‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏≠‡∏≠‡∏Å‡πÅ‡∏ï‡πà‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏¥‡∏î ‡πÑ‡∏°‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤ T ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏°‡∏≤‡∏ö‡∏ß‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏á ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ

‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ `O(n)` ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°
